<beans:beans 
	xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security.xsd">
           
<!--xmlns="http://www.springframework.org/schema/security" 네임스페이스로 security를 지정해줘서 인코더가 안먹힘
	xmlns 네임스페이스를 xmlns="http://www.springframework.org/schema/beans"로 바꿔주던가해야함

 -->
           
<!-- 	<bean id="bcyrptPasswordEncoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder" /> -->
    <!-- 정적 리소스 파일들에는 보안 설정을 하지 않음 -->
    <!-- include폴더 안에는 css같은 소스파일만 들어감 -->
    <http pattern="/webapp/**" security="none" />
    
    <http auto-config='true' use-expressions="false">
        <intercept-url pattern="/" access="ROLE_USER" />
        <intercept-url pattern="/admin" access="ROLE_ADMIN" />
         <form-login
            login-page="/login"
            login-processing-url="/login"
            username-parameter="email"
            password-parameter="password" />
        <!-- 권한에 관계없이 접속 가능한 영역(guest도 접속 가능) -->
<!--    <intercept-url pattern="/user/**" access="permitAll" /> -->
        
    </http>
    <authentication-manager>
        <authentication-provider>
            <user-service>
               <user name="admin" password="{noop}1234" authorities="ROLE_USER, ROLE_ADMIN" />
               <user name="guest" password="{noop}1234" authorities="ROLE_USER" />
               <user name="guest2" password="{noop}a1234" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans>

<!-- password 속성 값 앞에 {noop}을 추가하여 패스워드 인코딩 방식을 지정해야 합니다.  -->
<!-- 스프링 시큐리티 5.0부터는 기본적으로 패스워드를 암호화하도록 변경되었습니다.  -->
<!-- {noop}은 패스워드 인코딩 방식으로 NoOpPasswordEncoder를 사용하겠다는 의미입니다. -->